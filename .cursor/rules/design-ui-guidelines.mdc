---
description: デザイン・UI開発ガイドライン - テキスト重複防止、レイアウト修正、コントラスト改善のルール
globs:
  - frontend/**/*.html
  - frontend/**/*.css
  - frontend/**/*.js
  - frontend-react/src/**/*.jsx
  - frontend-react/src/**/*.css
alwaysApply: false
---

# デザイン・UI開発ガイドライン

## 基本原則

### 1. テキストの重複禁止
- テキストは一箇所にのみ定義し、同じコピーを複数要素に重複させない
- 見出しは1つだけ、適切な階層（h1→h2→h3）のみを使用する
- 同じテキストノードを複数の要素に複製しない

### 2. レイアウト修正の原則
- Auto Layoutの方向・余白・整列を変更するときは、既存の構造を壊さず最小限の変更にする
- UIの修正時は、変更箇所だけを編集し、ファイル全体を書き換えない
- 既存の正常なコードには触れない
- 必要最小限の差分のみを出力する

### 3. コントラストと視認性
- 本文テキストは背景が#F7F8FA程度なら#111〜#222くらいまで濃くする
- WCAGのコントラスト比（4.5:1以上）を必ず満たす
- メインの見出し・重要な指標名だけブランドカラー（濃いブルーなど）を使用
- それ以外の説明文はモノクロで抑える

### 4. 余白と情報設計
- セクションごとに上下80pxのマージンを取り、セクション内部の要素間は24px程度に統一
- 8pxグリッドシステムに揃える
- セクションのまとまりごとに背景の明度を切り替える（グラフセクションは白、指標解説セクションはごく薄いグレー）

### 5. 情報密度の管理
- 経済指標の解説カードは情報量を制限：
  - 指標名 + 一行要約
  - メリット（3点まで）
  - デメリット（3点まで）
- テキスト量を1カードあたり見出し + 要約 + 箇条書き6項目以内に収める

## プロンプト対応ルール

### エラー指摘時の対応
- 「エラーの指摘＋あるべき状態＋禁止事項」をセットで理解する
- 修正後に、テキストの重複とレイアウト崩れが起きていないか、箇条書きで自己レビューを書く
- 同じタイプのバグが繰り返される場合、なぜそのバグが起きたのか説明し、次から同じバグを避けるためのルールを3つ書く

### 作業の分割
- 大きな変更は小さなタスクに分ける
- 1プロンプトで「ページ全体をいい感じに」ではなく、セクションごとに依頼する
- Hero、Features、CTAなど、セクションごとに分けて作業する

## チェックリスト

UIコンポーネントを作成・修正する際は、以下を満たすこと：
- [ ] テキストはユニークで、同じコピーを2回以上表示しない
- [ ] 余白は8pxグリッドに揃える
- [ ] 見出し階層はh1→h2→h3のみ
- [ ] コントラスト比4.5:1以上を満たす
- [ ] 変更箇所のみを編集し、既存の正常なコードには触れない
- [ ] ファイル全体を書き換えない

## 技術スタック
- Tailwind CSS + DaisyUI
- D3.js for charts
- Noto Sans JPフォント（デジタル庁準拠）
